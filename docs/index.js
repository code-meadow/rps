!function(){"use strict";var e=["https://the-coinsman-rps.ceagrass.workers.dev","https://rps.andrewgrass.workers.dev","https://the-burger-rps.ceagrass.workers.dev","https://yugiboy-rps.ceagrass.workers.dev"],r={},l=[],a=e=>null==e?e:e.key,o=function(e){this.tag[e.type](e)},s=(e,r,l,a,s)=>{"key"===r||("o"===r[0]&&"n"===r[1]?((e.tag||(e.tag={}))[r=r.slice(2)]=a)?l||e.addEventListener(r,o):e.removeEventListener(r,o):!s&&"list"!==r&&"form"!==r&&r in e?e[r]=null==a?"":a:null==a||!1===a?e.removeAttribute(r):e.setAttribute(r,a))},t=(e,r)=>{var l=e.props,a=3===e.tag?document.createTextNode(e.type):(r=r||"svg"===e.type)?document.createElementNS("http://www.w3.org/2000/svg",e.type,{is:l.is}):document.createElement(e.type,{is:l.is});for(var o in l)s(a,o,null,l[o],r);return e.children.map(e=>a.appendChild(t(e=i(e),r))),e.dom=a},n=(e,r,l,o,c)=>{if(l===o);else if(null!=l&&3===l.tag&&3===o.tag)l.type!==o.type&&(r.nodeValue=o.type);else if(null==l||l.type!==o.type)r=e.insertBefore(t(o=i(o),c),r),null!=l&&e.removeChild(l.dom);else{var y,d,p,u,h=l.props,m=o.props,v=l.children,w=o.children,g=0,f=0,P=v.length-1,k=w.length-1;for(var T in c=c||"svg"===o.type,{...h,...m})("value"===T||"selected"===T||"checked"===T?r[T]:h[T])!==m[T]&&s(r,T,h[T],m[T],c);for(;f<=k&&g<=P&&null!=(p=a(v[g]))&&p===a(w[f]);)n(r,v[g].dom,v[g++],w[f]=i(w[f++]),c);for(;f<=k&&g<=P&&null!=(p=a(v[P]))&&p===a(w[k]);)n(r,v[P].dom,v[P--],w[k]=i(w[k--]),c);if(g>P)for(;f<=k;)r.insertBefore(t(w[f]=i(w[f++]),c),(d=v[g])&&d.dom);else if(f>k)for(;g<=P;)r.removeChild(v[g++].dom);else{var C={},O={};for(T=g;T<=P;T++)null!=(p=v[T].key)&&(C[p]=v[T]);for(;f<=k;)p=a(d=v[g]),u=a(w[f]=i(w[f])),O[p]||null!=u&&u===a(v[g+1])?(null==p&&r.removeChild(d.dom),g++):null==u||1===l.tag?(null==p&&(n(r,d&&d.dom,d,w[f],c),f++),g++):(p===u?(n(r,d.dom,d,w[f],c),O[u]=!0,g++):null!=(y=C[u])?(n(r,r.insertBefore(y.dom,d&&d.dom),y,w[f],c),O[u]=!0):n(r,d&&d.dom,null,w[f],c),f++);for(;g<=P;)null==a(d=v[g++])&&r.removeChild(d.dom);for(var T in C)null==O[T]&&r.removeChild(C[T].dom)}}return o.dom=r},i=e=>!0!==e&&!1!==e&&e?e:d(""),c=e=>3===e.nodeType?d(e.nodeValue,e):y(e.nodeName.toLowerCase(),r,l.map.call(e.childNodes,c),e,null,1),y=(e,r,l,a,o,s)=>({type:e,props:r,children:l,dom:a,key:o,tag:s}),d=(e,a)=>y(e,r,l,a,null,3),p=(e,r,a)=>y(e,r,Array.isArray(a)?a:null==a?l:[a],null,r.key);const u={playerOneScore:0,playerTwoScore:0,roundsPlayed:0,tiesPlayed:0,result:"new-players",playerOneChoice:"nothing yet",playerTwoChoice:"nothing yet"},h={...u,playerOneBio:{},playerTwoBio:{},error:!1};async function m(r){let l=e[Math.floor(Math.random()*e.length)],a=l;for(;l===a&&e.length>1;)a=e[Math.floor(Math.random()*e.length)];try{const[e,o]=await Promise.all([fetch(l+"/bio.json").then(e=>e.json()),fetch(a+"/bio.json").then(e=>e.json())]);return{...r,...u,players:[l,a],playerOneBio:e,playerTwoBio:o,error:!1}}catch{return{...r,...u,players:[null,null],playerOneBio:{},playerTwoBio:{},error:"Had trouble fetching the player. Please try again."}}}class v{static PlayerArea(e){return e.error?p("div",{class:"PlayerArea error"},d(e.error)):p("div",{class:"PlayerArea"},[v.Player(e.playerOneBio),v.Player(e.playerTwoBio)])}static Player(e){return p("div",{class:"PlayerArea-Player"},[p("h2",{class:"Player-Name"},d(e.name)),p("img",{class:"Player-Image",alt:e.name,src:e.image_url}),p("p",{class:"Player-Description"},d(e.strategy))])}}const w=e=>((e,r)=>((e=n(e.parentNode,e,e.v||c(e),r)).v=r,e))(document.getElementById("app"),p("main",{},[p("div",{class:"Header"},[p("h1",{},d("Rock! Paper! Scissors!"))]),v.PlayerArea(e),p("div",{class:"RoundsArea"},d(e.roundsPlayed+" rounds played. "+e.tiesPlayed+" were ties.")),p("div",{class:"ScoreArea"},d([e.playerOneScore,e.playerTwoScore].join("-"))),p("div",{class:"ResultArea"},d("Player One chose "+e.playerOneChoice+". Player Two chose "+e.playerTwoChoice+". "+e.result)),p("div",{class:"PlayArea"},[p("button",{class:"play",onclick:async()=>w(await async function(e){const r=await Promise.all([fetch(e.players[0]+"/rps").then(e=>e.text()),fetch(e.players[1]+"/rps").then(e=>e.text())]);let l=e.playerOneScore,a=e.playerTwoScore,o="",s=e.tiesPlayed;return r[0]===r[1]?(o="Tie!",s++):{rock:{scissors:!0},paper:{rock:!0},scissors:{paper:!0}}[r[0]][r[1]]?(o="Player One Wins!",l++):(o="Player Two Wins!",a++),{...e,roundsPlayed:e.roundsPlayed+1,tiesPlayed:s,result:o,playerOneChoice:r[0],playerTwoChoice:r[1],playerOneScore:l,playerTwoScore:a}}(e))},d("Rock! Paper! Scissors!")),p("button",{class:"new-players secondary",onclick:async()=>w(await m(e))},d("Reset with New Players"))])]));document.addEventListener("DOMContentLoaded",async()=>{w(await m(h))})}();
